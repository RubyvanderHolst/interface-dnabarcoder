{% extends 'base_templates/base.html' %}

{% block title %}| Cutoff prediction{% endblock %}
{% block nav-cutoff %}active{% endblock %}

{% block container %}
    <head>
        {% load static %}
        <script src="{% static 'js/cutoff.js' %}"></script>
    </head>
    {% block container_cutoff %}
    {% include 'base_templates/base_tabs.html' %}
    {% load crispy_forms_filters %}
        <div class="container">
        <form action="{% url 'cutoff_results' %}" method="post" id="id_form"
              enctype="multipart/form-data" target="_blank">
            {% csrf_token %}
            <div id="div_home">
                <h2 class="bg-light border text-center">Cutoff calculation</h2>
                <div class="row">
                    <div class="col">
                        <div class="card h-100">
                            <h5 class="card-header">Reference data input</h5>
                                <div class="card-body">
                                    {{ form.input_file|as_crispy_field }}
                                    {{ form.sim_file|as_crispy_field }}
                                </div>
                        </div>
                    </div>

                    <div class="col">
                        <div class="card h-100">
                            <h5 class="card-header">Type of cut-off</h5>
                            <div class="card-body">
                                {{ form.cutoff_type|as_crispy_field }}
                            </div>
                        </div>
                    </div>

                    <div class="col">
                        <div class="card h-100">
                            <h5 class="card-header">Rank</h5>
                            <div class="card-body">
                                {{ form.rank|as_crispy_field }}
                                {{ form.higher_rank|as_crispy_field }}
                            </div>
                        </div>
                    </div>


                </div>
                <div class="d-grid gap-3 col-2 mx-auto mt-30">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
            </div>

            <div id="div_settings" class="hidden">
                <h2 class="bg-light border text-center">Settings</h2>
                <div class="row align-items-end">
                    <div class="col">
                        {{ form.max_seq_number|as_crispy_field }}
                    </div>
                    <div class="col">
                        {{ form.min_group_number|as_crispy_field }}
                    </div>
                </div>
                <div class="row align-items-end">
                    <div class="col">
                        {{ form.min_alignment_length|as_crispy_field }}
                    </div>
                    <div class="col">
                        {{ form.min_seq_number|as_crispy_field }}
                    </div>
                </div>
                <div class="row">
                    <div class="col">
                        <label class="form-label">Thresholds and step size of prediction:</label>
                        <div class="input-group d-flex flex-nowrap">
                                {{ form.starting_threshold|as_crispy_field }}
                                {{ form.end_threshold|as_crispy_field }}
                                {{ form.step|as_crispy_field }}
                        </div>

                    </div>
                    <div class="col">
                        <div class="card">
                            <ul class="list-group list-group-flush">
                                <li class="list-group-item">
                                    <div class="form-check form-switch">
                                        {{ form.remove_comp|as_crispy_field }}
                                    </div>
                                </li>
                                <li class="list-group-item">
                                    {{ form.cutoff_remove|as_crispy_field }}
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        </div>
    {% endblock %}

{% endblock %}
